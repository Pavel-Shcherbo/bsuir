(this["webpackJsonpItSymphony.Chat.Web.Widget"]=this["webpackJsonpItSymphony.Chat.Web.Widget"]||[]).push([[0],{268:function(u,e,D){u.exports=D(739)},709:function(u,e,D){},711:function(u,e,D){},727:function(u,e,D){},728:function(u,e,D){},729:function(u,e,D){},730:function(u,e,D){},731:function(u,e,D){},732:function(u,e,D){},735:function(u,e,D){},739:function(u,e,D){"use strict";D.r(e);var t,n,a,r=D(0),s=D.n(r),o=D(33),i=D(63),c=D(110),F=D(105),C=D(106),A=D(112),E=D(111),l=D(74),B=D(7),d=D(39),g=D(78),m=D(29),f=D(245);!function(u){u[u.Operator=1]="Operator",u[u.Bot=2]="Bot",u[u.Supervisor=3]="Supervisor"}(t||(t={})),function(u){u[u.Text=1]="Text",u[u.Link=2]="Link",u[u.Trigger=3]="Trigger"}(n||(n={})),function(u){u[u.Text=1]="Text",u[u.Markup=2]="Markup",u[u.Video=3]="Video",u[u.Audio=4]="Audio",u[u.Navigation=5]="Navigation",u[u.TextToSpeech=6]="TextToSpeech"}(a||(a={}));var p,v,h=["image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/tiff","image/webp"],b=D(6),w=D.n(b),y=D(12),S="".concat("CHAT/","START_SIGNALR"),_="".concat("CHAT/","ADD_MESSAGE_TO_STATE_SUCCESS"),x="".concat("CHAT/","ADD_MESSAGES_TO_STATE_SUCCESS"),M="".concat("CHAT/","TRY_GET_PREV_CHAT_START"),O="".concat("CHAT/","TRY_GET_PREV_CHAT_FINISH"),T="".concat("CHAT/","INITIALIZE_MESSAGES_SUCCESS"),j="".concat("CHAT/","INIT_CLIENT_HIDE_START_MESSAGE_SUCCESS"),k="".concat("CHAT/","SEND_MESSAGE_ACTION_START"),I="".concat("CHAT/","SEND_MESSAGE_ACTION_SUCCESS"),N="".concat("CHAT/","SEND_MESSAGE_ACTION_ERROR"),R="".concat("CHAT/","SEND_FILE_MESSAGE_START_ACTION"),P="".concat("CHAT/","SEND_FILE_MESSAGE_FINISH_ACTION"),U="".concat("CHAT/","EDIT_MESSAGE_SUCCESS"),L="".concat("CHAT/","EDIT_MESSAGE_START"),H="".concat("CHAT/","READ_MESSAGE"),G="".concat("CHAT/","SET_FOOTER_COMPANY_TITLE_SUCCESS"),z="".concat("/bot/chat/api"),V=("".concat("/bot/chat/widget/api"),"".concat("/bot/signalrhost")),W="".concat(z,"/picture"),q="".concat(W,"/get-picture-by-id?pictureId="),J="".concat(z,"/file"),Z="".concat(J,"/get-file-by-id?fileId="),X=function(u){return"".concat(window.serverUrl,"/get-prev-chat-messages?current-chat-id=").concat(u)},Y=function(){var u=Object(y.a)(w.a.mark((function u(e){var D,t,n,a,r,s=arguments;return w.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return D=s.length>1&&void 0!==s[1]&&s[1],t=!(s.length>2&&void 0!==s[2])||s[2],n=0,u.prev=3,u.next=6,e;case 6:if(a=u.sent,n=a.status,!a.ok){u.next=29;break}if(r={},204===a.status){u.next=26;break}if(!D){u.next=24;break}if(!t){u.next=18;break}return u.next=15,a.json();case 15:u.t1=u.sent,u.next=21;break;case 18:return u.next=20,a.text();case 20:u.t1=u.sent;case 21:u.t0=u.t1,u.next=25;break;case 24:u.t0=null;case 25:r=u.t0;case 26:return u.abrupt("return",{isSuccess:!0,value:r,statusCode:n});case 29:return u.abrupt("return",{isSuccess:!1,statusCode:n});case 30:u.next=36;break;case 32:return u.prev=32,u.t2=u.catch(3),console.log(u.t2),u.abrupt("return",{isSuccess:!1,statusCode:n});case 36:case"end":return u.stop()}}),u,null,[[3,32]])})));return function(e){return u.apply(this,arguments)}}(),K=D(771),$=function(){var u=function(){var u=Object(K.a)();try{localStorage.setItem("externalId",u)}catch(e){}finally{return u}};try{var e,D,t;if(void 0===window.externalId)window.externalId=null!==(e=null!==(D=function(){var u=Q("account");if("string"==typeof u&&"null"!==u&&"undefined"!==u&&0!=u.length){var e=u.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),D=decodeURIComponent(atob(e).split("").map((function(u){return"%"+("00"+u.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(D).uid}}())&&void 0!==D?D:null===(t=localStorage.getItem("externalId"))||void 0===t?void 0:t.replace(/\s+/g,""))&&void 0!==e?e:u()}catch(n){console.error(n)}return void 0===window.externalId&&(window.externalId=u()),encodeURIComponent(window.externalId)},Q=function(u){var e=new URLSearchParams(window.location.search).get(u);return e=null===e||void 0==e||"null"===e||"undefined"===e?"":e},uu=function(){try{return new URL(Q("parent")).host}catch(u){return console.error(u),window.location.host}},eu=function(){var u=Object(y.a)(w.a.mark((function u(e,D){var t,n;return w.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(t=ru()){u.next=3;break}return u.abrupt("return",new Promise((function(){return!1})));case 3:return t.set("Content-Type","application/json"),t.set("account",Q("account")),t.set("parent",uu()),D&&t.set("Message-Type","start-message"),n=fetch("".concat(window.serverUrl,"/send-message"),{body:JSON.stringify(e),method:"POST",headers:t}),u.next=10,Y(n);case 10:return u.abrupt("return",u.sent);case 11:case"end":return u.stop()}}),u)})));return function(e,D){return u.apply(this,arguments)}}(),Du=function(){var u=Object(y.a)(w.a.mark((function u(e){var D,t;return w.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(D=ru()){u.next=3;break}return u.abrupt("return",new Promise((function(){return!1})));case 3:return D.set("Content-Type","application/json"),t=fetch("".concat(window.serverUrl,"/send-preview-message"),{body:JSON.stringify(e),method:"POST",headers:D}),u.next=7,Y(t);case 7:return u.abrupt("return",u.sent);case 8:case"end":return u.stop()}}),u)})));return function(e){return u.apply(this,arguments)}}(),tu=function(){var u=Object(y.a)(w.a.mark((function u(e,D){var t,n,a;return w.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(t=ru()){u.next=3;break}return u.abrupt("return",new Promise((function(){return!1})));case 3:return(n=new FormData).append("file",e),n.append("type",D.toString()),a=fetch("".concat(window.serverUrl,"/send-file"),{method:"POST",headers:t,body:n}),u.next=9,Y(a,!0);case 9:return u.abrupt("return",u.sent);case 10:case"end":return u.stop()}}),u)})));return function(e,D){return u.apply(this,arguments)}}(),nu=function(){var u=Object(y.a)(w.a.mark((function u(){var e,D;return w.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(e=ru()){u.next=3;break}return u.abrupt("return",new Promise((function(){return!1})));case 3:return D=fetch("".concat(window.serverUrl,"/get-init-messages"),{method:"GET",headers:e}),u.next=6,Y(D,!0);case 6:return u.abrupt("return",u.sent);case 7:case"end":return u.stop()}}),u)})));return function(){return u.apply(this,arguments)}}(),au=function(){var u=Object(y.a)(w.a.mark((function u(e){var D,t;return w.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(D=ru()){u.next=3;break}return u.abrupt("return",new Promise((function(){return!1})));case 3:return t=fetch(X(e),{method:"GET",headers:D}),u.next=6,Y(t,!0);case 6:return u.abrupt("return",u.sent);case 7:case"end":return u.stop()}}),u)})));return function(e){return u.apply(this,arguments)}}(),ru=function(){var u=new Headers,e=Q("token"),D=$();return e&&D?(u.set("token",e),u.set("externalId",D),u):null};!function(u){u[u.OperatorMessage=1]="OperatorMessage",u[u.ClientMessage=2]="ClientMessage",u[u.SystemMessage=3]="SystemMessage",u[u.ClientSystemMessage=4]="ClientSystemMessage"}(p||(p={})),function(u){u[u.FirstMessage=1]="FirstMessage",u[u.PurchaseRequest=2]="PurchaseRequest",u[u.CallbackRequest=3]="CallbackRequest"}(v||(v={}));var su,ou=function(u){var e={};if((null===u||void 0===u?void 0:u.indexOf("?"))>0)for(var D=u.split("?")[1].split("&"),t=0;t<D.length;++t){var n=D[t].split("=");e[n[0]]=n[1]}return e},iu=function(){var u=Fu(),e=cu(),D=ou(u);return{startBot:D.startbot,additionaldata:D.additionaldata,utmLabels:e}},cu=function(){var u,e=void 0,D=Fu(),t=ou(D),n=["Utm_source","Utm_medium","Utm_campaign","Utm_content","Utm_term"],a=Object(d.a)(n);try{for(a.s();!(u=a.n()).done;){var r=u.value;t[r.toLowerCase()]&&(void 0===e&&(e={}),e[r]=t[r.toLowerCase()])}}catch(s){a.e(s)}finally{a.f()}return e},Fu=function(){var u;return null===(u=window.location.search.split("&parent=")[1])||void 0===u?void 0:u.toLowerCase()};!function(u){u[u.signalR=0]="signalR",u[u.http=1]="http"}(su||(su={}));var Cu,Au=D(38),Eu=D(772),lu=[],Bu=function(){lu.forEach((function(u){return u()}))},du=function(){try{var u=gu(V);return window.serverUrl=u.url,window.serverProtocol=u.protocol,!0}catch(e){return!1}},gu=function(u){var e="".concat(u,"/negotiate?externalId=").concat($()),D=new XMLHttpRequest;if(D.open("GET",e,!1),D.send(null),200===D.status)return JSON.parse(D.responseText);throw"sendNegotiateRequest failed"},mu=function(){var u=Object(y.a)(w.a.mark((function u(e){var D,t,n;return w.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(u.prev=0,e.state!==Au.c.Connected){u.next=3;break}return u.abrupt("return");case 3:D=Q("account"),t=uu(),n=Q("token"),e.baseUrl="".concat(window.serverUrl,"/chat?externalId=").concat($(),"&token=").concat(n,"&account=").concat(D,"&parent=").concat(t),fu(e),u.next=14;break;case 10:u.prev=10,u.t0=u.catch(0),console.log("Error while establishing connection: "+u.t0),setTimeout((function(){return mu(e)}),2e3);case 14:case"end":return u.stop()}}),u,null,[[0,10]])})));return function(e){return u.apply(this,arguments)}}(),fu=function(){var u=Object(y.a)(w.a.mark((function u(e){return w.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(e.state!==Au.c.Connected){u.next=2;break}return u.abrupt("return");case 2:return e.serverTimeoutInMilliseconds=15e3,e.keepAliveIntervalInMilliseconds=1e6,console.log("Connecting.."),u.prev=5,u.next=8,e.start();case 8:Bu(),console.log("Connection started!"),u.next=16;break;case 12:u.prev=12,u.t0=u.catch(5),console.log("Error while establishing connection: "+u.t0),setTimeout((function(){return mu(e)}),2e3);case 16:case"end":return u.stop()}}),u,null,[[5,12]])})));return function(e){return u.apply(this,arguments)}}(),pu=function(u){window.signalRHubConnection.send("Pong",u),clearTimeout(Cu),Cu=setTimeout((function(){console.info("SignalR reconnecting due to a one minute we dont get pings.");try{window.signalRHubConnection.stop()}catch(u){}mu(window.signalRHubConnection)}),6e4)},vu=new URLSearchParams(window.location.search),hu=vu.get("parent"),bu=function(u){return function(){var e=Object(y.a)(w.a.mark((function e(D){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D({type:_,payload:{message:u}}),u.contentType===a.TextToSpeech?((t=new SpeechSynthesisUtterance).text=u.text,t.lang="ru-RU",t.onend=function(){window.speechSynthesis.cancel()},window.speechSynthesis.speak(t)):u.contentType===a.Navigation&&null!=hu&&window.parent.postMessage({type:"redirectToUrl",url:u.text},hu),null!==hu&&u.messageType!==p.ClientMessage&&(window.parent.postMessage("newMessage",hu),window.onfocus=function(){window.parent.postMessage("focus",hu)},u.event&&window.parent.postMessage([v[u.event],u.eventDescription],hu));case 3:case"end":return e.stop()}}),e)})));return function(u){return e.apply(this,arguments)}}()},wu=function(u){return function(){var e=Object(y.a)(w.a.mark((function e(D){var t,n,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D({type:x,payload:{messages:u}}),null!==hu&&0!==u.length&&(null===(t=u[u.length-1])||void 0===t?void 0:t.messageType)!==p.ClientMessage&&(window.parent.postMessage("newMessage",hu),window.onfocus=function(){window.parent.postMessage("focus",hu)},(null===(n=u[u.length-1])||void 0===n?void 0:n.event)&&(a=u[u.length-1],window.parent.postMessage([v[a.event],a.eventDescription],hu),console.log(u[u.length-1].event)));case 2:case"end":return e.stop()}}),e)})));return function(u){return e.apply(this,arguments)}}()},yu=function(u){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var D=Object(y.a)(w.a.mark((function D(t,n){var a,r;return w.a.wrap((function(D){for(;;)switch(D.prev=D.next){case 0:if(!(a=$())){D.next=10;break}if(r={message:u,from:{userMessengerId:a},isButtonReply:e},window.serverProtocol!==su.http){D.next=9;break}return t({type:k,payload:{message:{message:u,failed:!1}}}),D.next=7,Su(r,1,t,n);case 7:D.next=10;break;case 9:window.signalRHubConnection.invoke("MessageFromClient",r);case 10:case"end":return D.stop()}}),D)})));return function(u,e){return D.apply(this,arguments)}}()},Su=function(){var u=Object(y.a)(w.a.mark((function u(e,D,t,n){var a,r,s;return w.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return a=n().chat.messages.filter((function(u){return u.messageType!=p.ClientMessage})),r=a.length>0?a.reduce((function(u,e){return new Date(u.timeSent).getTime()>new Date(e.timeSent).getTime()?u:e})):null,s=!r||"chat-closed"===r.tag,u.next=5,eu(e,s);case 5:if(!u.sent.isSuccess){u.next=9;break}return t({type:I}),u.abrupt("return");case 9:if(!(D>=8)){u.next=12;break}return t({type:N}),u.abrupt("return");case 12:setTimeout(Object(y.a)(w.a.mark((function u(){return w.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:Su(e,D+1,t,n);case 1:case"end":return u.stop()}}),u)}))),1e3*_u(D));case 13:case"end":return u.stop()}}),u)})));return function(e,D,t,n){return u.apply(this,arguments)}}(),_u=function u(e){return e<=1?e:u(e-1)+u(e-2)},xu=D(766),Mu=D(740),Ou=D(265),Tu=D(261),ju=function(u){if(u)return Iu(u)?u:r.createElement(Tu.a.Markdown,{source:u,linkTarget:"_blank"})},ku=function(u){if(u){var e=u.split(/\n/).map((function(u,e){var D=u.split(/\s/),t=D.map((function(u,e){var t=e!==D.length-1?" ":"";if(u.match(/(\b(http[s\u017F]?|ftp|file|viber):\/\/(?:[!#%&\+-;=\?-Z_a-z\|~\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*(?:[#%&\+\/-9=@-Z_a-z\|~\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A]))/gi)){var n=u.match(/(\b(http[s\u017F]?|ftp|file|viber):\/\/(?:[!#%&\+-;=\?-Z_a-z\|~\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*(?:[#%&\+\/-9=@-Z_a-z\|~\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A]))/gi);return r.createElement(r.Fragment,null,n?u.split(n[0])[0]:"",r.createElement("a",{key:e,href:n?n[0]:"",target:"_blank"},n?n[0]:""),n?u.split(n[0])[1]:"",t)}return u+t}));return""===u?r.createElement("br",null):r.createElement("div",{key:e,style:{textAlign:"left"}},t)}));return r.createElement("div",null,e)}},Iu=function(u){for(var e=1;e<u.length;e++)if(u[e]!==u[0])return!1;return!0};function Nu(u,e){return"DateTime"===e?new Date(u).toLocaleString(navigator.language):"Date"===e?new Date(u).toLocaleDateString(navigator.language):"Time"===e?new Date(u).toLocaleTimeString(navigator.language):new Date(u).toLocaleTimeString(navigator.language).replace(/(.*)\D\d+/,"$1")}D(709);var Ru,Pu=function(u){var e,D,n,s,o,i=function(){switch(u.message.messageType){case p.ClientMessage:return"client_message";case p.OperatorMessage:case p.ClientSystemMessage:return"operator_message";default:return""}},c=function(){window.speechSynthesis.cancel();var e=new SpeechSynthesisUtterance;e.text=u.message.text,e.lang="ru-RU",e.onend=function(){window.speechSynthesis.cancel()},window.speechSynthesis.speak(e)},F=function(){var e;switch(u.message.messageType){case p.ClientMessage:return"\u0412\u044b";case p.OperatorMessage:case p.ClientSystemMessage:return(null===(e=u.message.operatorModel)||void 0===e?void 0:e.displayName)?u.message.operatorModel.displayName:"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440";default:return"\u0421\u0438\u0441\u0442\u0435\u043c\u0430"}},C="https://maps.google.com/maps?q="+(null===(e=u.message.location)||void 0===e?void 0:e.latitude)+","+(null===(D=u.message.location)||void 0===D?void 0:D.longitude)+"&z=15&output=embed",A=new URLSearchParams(window.location.href),E=A.get("inline_operator_position");E=null==E?"undefined":E;var l="true"===A.get("separeteOperatorNameAndTimeSent"),B="true"===A.get("separate_message_and_buttons"),d=null!==(n=A.get("setDateTimeFormat"))&&void 0!==n?n:"",g=function(e){return r.createElement(r.Fragment,null,r.createElement("div",{className:"message__operator_content"},u.message.messageType==p.OperatorMessage&&r.createElement("img",{className:"message__operator_image",src:q+u.message.operatorModel.avatarId+"&customerId="+u.customerId,alt:"Operator avatar"}),r.createElement(Ou.a,{className:"message__inline_".concat(u.message.messageType==p.ClientMessage?"right":"left","_info"),variant:"subtitle2"},F(),", ",Nu(u.message.timeSent,d))),e&&r.createElement("hr",null))},m=function(){var e="false"!==new URLSearchParams(window.location.href).get("disableUsedButtons");return r.createElement("div",{className:"message__buttons_container",id:"message_".concat(u.message.messageId,"_buttons")},u.message.buttons?u.message.buttons.map((function(D,t){var n=r.createRef();return r.createElement("div",{ref:n,className:e&&u.isButtonsDisabled?"message__button button__disabled":"message__button",key:t,onClick:function(){e||(n.current.className="message__button button__disabled",setTimeout((function(e){e.className="message__button",u.setForceButtonDisabled(!1)}),1e3,n.current)),u.onMenuButtonClick(D),e||u.setForceButtonDisabled(!0)}},D.text)})):"")};return r.createElement("div",{className:"".concat(i()," ").concat("undefined"===E?"":"no_background_image"),id:"message_".concat(u.message.messageId),style:function(){var e;return(null===(e=u.message.operatorModel)||void 0===e?void 0:e.avatarId)?{backgroundImage:"none"}:{}}()},(null===(s=u.message.operatorModel)||void 0===s?void 0:s.avatarId)&&"undefined"===E&&r.createElement("div",{className:"".concat(i(),"_avatar message_avatar"),style:{backgroundImage:"url("+q+u.message.operatorModel.avatarId+"&customerId="+u.customerId+")",backgroundRepeat:"no-repeat"}}),r.createElement(Mu.a,{className:"message__content"},l&&"undefined"===E&&r.createElement("div",{className:"".concat(i(),"_info")},F(),", ",Nu(u.message.timeSent,d)),!l&&"undefined"===E&&(null===(o=u.message.operatorModel)||void 0===o?void 0:o.displayName)&&r.createElement("div",null,r.createElement("div",null,u.message.operatorModel.displayName),r.createElement("hr",null)),"top"===E&&g(!0),null!==u.message.imageId&&void 0!==u.message.imageId&&r.createElement("a",{href:q+u.message.imageId+"&customerId="+u.customerId,target:"_blank"},r.createElement("img",{className:"message__image",src:q+u.message.imageId+"&customerId="+u.customerId})),null!==u.message.location&&void 0!==u.message.location&&r.createElement("iframe",{className:"location_iframe",src:C})||function(){var e;switch(u.message.contentType){case a.Markup:return ju(u.message.text);case a.Text:return ku(u.message.text);case a.Video:return r.createElement("iframe",{src:u.message.text,width:"240",height:"140",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0});case a.Audio:return r.createElement("audio",{src:u.message.text,controls:!0});case a.TextToSpeech:return r.createElement(r.Fragment,null,ju(u.message.text),r.createElement("i",{className:"material-icons replay-text-to-speech-button",onClick:c},"replay"));case a.Navigation:return ku(u.message.text);default:return(null===(e=u.message.operatorModel)||void 0===e?void 0:e.type)===t.Bot?ju(u.message.text):ku(u.message.text)}}(),function(e){if(null!==e&&void 0!==e&&null!==e.fileId)return r.createElement("div",null,r.createElement("a",{href:Z+e.fileId+"&customerId="+u.customerId,target:"_blank"},e.name))}(u.message.file),!B&&m(),!l&&"undefined"===E&&r.createElement(Ou.a,{className:"message__created-date",variant:"subtitle2",gutterBottom:!0,align:"right"},Nu(u.message.timeSent,d))),B&&m(),"bottom"===E&&g(!1))},Uu=D(767),Lu=window.webkitSpeechRecognition,Hu=D(763),Gu=D(773),zu=D(774),Vu=(D(710),D(262)),Wu=D(264),qu=(D(711),D(712)),Ju=function(u){var e=Object(r.useState)(!1),D=Object(m.a)(e,2),t=D[0],n=D[1],a=Wu.a({versionAbove:"12.0",group:["people-body","animals-nature","food-drink","travel-places","activities","objects","symbols","flags"]}).map((function(u){return qu(u.emoji).toString().toUpperCase()}));return s.a.createElement(Hu.a,{isOpen:t,toggle:function(){n(!t)}},s.a.createElement(Gu.a,{className:"smiles-container-dropdownToggle"},s.a.createElement("img",{className:"smiles-button"})),t&&s.a.createElement(zu.a,null,s.a.createElement("div",{className:"smiles-container"},s.a.createElement(Vu.a,{emojisToShowFilter:function(u){return a.some((function(e){return e===u.unified}))},useButton:!1,title:"",theme:"light",set:"google",color:"gray",showPreview:!1,onSelect:u.onEmojiClick}))))},Zu=D(770),Xu=D(769),Yu=D(764),Ku=(D(727),!1),$u="hight",Qu=function(u){Object(A.a)(D,u);var e=Object(E.a)(D);function D(){var u;Object(F.a)(this,D);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(u=e.call.apply(e,[this].concat(n))).state={messageText:"",isReadyToSendPreviewMessage:!0},u.speechRecognizer=void 0,u.timer=void 0,u.inputRef=r.createRef(),u.urlParams=new URLSearchParams(window.location.href),u.autoSendSpeechRecognizier="true"===u.urlParams.get("autoSendSpeechRecognizier"),u._setChatBodyHeight=function(){setTimeout((function(){var u,e,D,t=null===(u=document.getElementById("input-container"))||void 0===u?void 0:u.offsetHeight,n=null===(e=document.getElementById("textarea"))||void 0===e?void 0:e.offsetHeight,a=void 0!==t&&void 0!==n?t+n:0;null===(D=document.getElementById("chat-body"))||void 0===D||D.style.setProperty("bottom",0!=a?"".concat(a,"px"):"")}))},u._onMessageChangeHandler=function(e){if("\n"!==e.currentTarget.value[e.currentTarget.value.length-1]||!(u.state.messageText.length<1||""===e.currentTarget.value.trim())){var D=e.currentTarget.value;u.setState({messageText:D}),u.state.isReadyToSendPreviewMessage&&u.setState({isReadyToSendPreviewMessage:!1},(function(){return u._previewMessageHandler(D)}))}},u._previewMessageHandler=function(e){u.props.onSendPreviewMessage(e),setTimeout((function(){e!=u.state.messageText?u._previewMessageHandler(u.state.messageText):u.setState({isReadyToSendPreviewMessage:!0})}),3e3)},u._onSendMessageHandler=function(){u.state.messageText.length<1||""===u.state.messageText.trim()||(u.props.onSendMessage(u.state.messageText),u.setState({messageText:""}))},u.onVoiceInputChangeText=function(e){u.setState({messageText:e})},u.setMicrophoneOpacity=function(){var u=document.getElementById("mic-button");u&&("low"==$u?(u.style.opacity="1",$u="hight"):(u.style.opacity="0.3",$u="low"))},u.onVoiceInputActivate=function(e){var D=document.getElementById("mic-button");if(Ku)null===D||void 0===D||D.setAttribute("class","mic-button"),u.speechRecognizer.stop(),u.timer&&(clearTimeout(u.timer),u.timer=null),Ku=!1;else{Ku=!0;var t=u.state.messageText;u.speechRecognizer=new Lu,u.speechRecognizer.interimResults=!0,u.speechRecognizer.maxAlternatives=1,u.speechRecognizer.lang="ru-RU";var n=document.getElementById("textarea");null===D||void 0===D||D.setAttribute("class","mic-button-recording"),u.speechRecognizer.start();var a=setInterval(u.setMicrophoneOpacity,1e3);u.speechRecognizer.onresult=function(a){n&&(n.scrollTop=n.scrollHeight);var r=a.results[a.resultIndex];void 0!==t&&t.length<1?e(r[0].transcript):e(t+" "+r[0].transcript),r.isFinal&&u.autoSendSpeechRecognizier&&Ku&&(u.timer=setTimeout((function(){u._onSendMessageHandler(),null===D||void 0===D||D.setAttribute("class","mic-button"),Ku=!1}),3e3))},u.speechRecognizer.onaudioend=function(){u.autoSendSpeechRecognizier||(null===D||void 0===D||D.setAttribute("class","mic-button"),Ku=!1),clearInterval(a),D&&(D.style.opacity="0.7")}}},u}return Object(C.a)(D,[{key:"componentDidUpdate",value:function(){this._setChatBodyHeight()}},{key:"_setFocus",value:function(){var u;(null===(u=this.inputRef.current)||void 0===u?void 0:u.children[0]).focus()}},{key:"_onEmojiClick",value:function(u){this.setState({messageText:this.state.messageText+u.native})}},{key:"render",value:function(){var u=this,e="send-button message-input__icon-button message-input__icon-button--end "+(this.state.messageText.length<1?"message-input__icon-button--disabled":""),D=new URLSearchParams(window.location.search),t=D.has("input_placeholder")?D.get("input_placeholder"):"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",n=this.state.messageText.length<1?"send-button-icon":"send-button-icon active-icon";return r.createElement(Zu.a,{placeholder:t,id:"textarea",type:"text",ref:this.inputRef,spellCheck:!0,value:this.state.messageText,rowsMax:5,autoFocus:!0,onChange:this._onMessageChangeHandler,onPaste:this.props.onInputPasteHandler,multiline:!0,fullWidth:!0,inputProps:{maxLength:1e3},className:"message-input__text",endAdornment:r.createElement(Yu.a,{position:"end"},r.createElement(Ju,{onEmojiClick:this._onEmojiClick.bind(this)}),Lu?r.createElement("img",{className:"mic-button",onClick:function(){u.onVoiceInputActivate(u.onVoiceInputChangeText)},id:"mic-button"}):r.createElement("img",null),r.createElement(Xu.a,{edge:"end",className:e,onClick:this._onSendMessageHandler,disabled:this.state.messageText.length<1||this.props.isSendingMessage},r.createElement("div",{className:n}))),onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(u.props.isSendingMessage?e.preventDefault():u._onSendMessageHandler())}})}}]),D}(r.Component),ue=D(768);D(728);function ee(u){var e=Object(r.useRef)(null),D=Object(r.useState)(!1),t=Object(m.a)(D,2),n=t[0],a=t[1],o=Ru.File,i=function(e){if(0!==e.target.files.length){var D=e.target.files[0];u.onFileChoosen(D,o),setTimeout((function(){document.getElementsByClassName("input-file__hidden")[0].removeAttribute("type"),document.getElementsByClassName("input-file__hidden")[0].removeAttribute("accept")}),1e3)}},c=new URLSearchParams(window.location.search),F=c.get("parent"),C=function u(e){A(JSON.parse(e.data)),window.removeEventListener("message",u)},A=function(e){var D;null===(D=u.onLocationChoosen)||void 0===D||D.call(u,e)},E=function(u){var D=e.current;if(D)return D.setAttribute("type","file"),D.setAttribute("accept",u),D.onchange=i,D},l=function(u){var e,D;o=u;switch(u){case Ru.Location:null!==F?(window.addEventListener("message",C),window.parent.postMessage("getGeolocation",F)):navigator.geolocation.getCurrentPosition(A);break;case Ru.Image:null===(e=E("image/*"))||void 0===e||e.click();break;case Ru.File:null===(D=E("*"))||void 0===D||D.click()}a(!1)},B="true"===c.get("withoutLocation"),d="true"===c.get("withoutAttach");return s.a.createElement(s.a.Fragment,null,s.a.createElement("input",{ref:e,className:"input-file__hidden"}),!d&&s.a.createElement(Hu.a,{className:"choose-file-dialog__container",isOpen:n,toggle:function(){a(!n)}},s.a.createElement(Gu.a,{tag:"div"},s.a.createElement("img",{className:n?"choose-file-dialog__attach-image_clicked":"choose-file-dialog__attach-image"})),n&&s.a.createElement(zu.a,{style:{},className:"choose-file-dialog__menu"},s.a.createElement("div",{onClick:function(){l(Ru.Image)},className:"choose-file-dialog__menu-item"},"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"),s.a.createElement("div",{onClick:function(){l(Ru.File)},className:"choose-file-dialog__menu-item"},"\u0424\u0430\u0439\u043b"),!B&&s.a.createElement("div",{onClick:function(){l(Ru.Location)},className:"choose-file-dialog__menu-item"},"\u041c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435"))))}!function(u){u[u.Image=0]="Image",u[u.File=1]="File",u[u.Location=2]="Location"}(Ru||(Ru={}));var De=D(41),te=function(u){return u.chat},ne=Object(De.a)(te,(function(u){return u.messages.filter((function(e){return!u.hideClientStartMessage||"START_MESSAGE_TAG"!==e.tag})).sort((function(u,e){return new Date(u.timeSent).getTime()-new Date(e.timeSent).getTime()}))})),ae=Object(De.a)(te,(function(u){return u.isMessageEditing})),re=Object(De.a)(te,(function(u){return u.isGettingPrevChatMessages})),se=Object(De.a)(te,(function(u){return u.messages.filter((function(u){return!1===u.isRead&&u.messageType!==p.ClientMessage}))[0]})),oe=Object(De.a)(te,(function(u){return u.sendingFilesCount})),ie=Object(De.a)(te,(function(u){return u.footerCompanyName})),ce=Object(De.a)(te,(function(u){return u.footerCompanyUrl})),Fe=Object(De.a)(te,(function(u){return u.customerId})),Ce=Object(De.a)(te,(function(u){return u.loadPrevChat})),Ae=Object(De.a)(te,(function(u){return u.sendingMessage})),Ee=D(257),le=D.n(Ee);D(729),D(730);function Be(u){var e=Object(r.useState)(!1),D=Object(m.a)(e,2),t=D[0],n=D[1],a=Object(r.useRef)(null);Object(r.useEffect)((function(){null!=u.file&&n(!0)}),[u.file]);var o=function(){var e,D,t=null===(e=u.file)||void 0===e?void 0:e.name;return t&&t.length>35&&(t=t.substring(0,27)+"..."+t.substring(t.length-7,t.length)),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{title:null===(D=u.file)||void 0===D?void 0:D.name,className:"previewFileDialog__file-name"},t))};return s.a.createElement(s.a.Fragment,null,s.a.createElement(Hu.a,{className:"preview-file-dialog__container",isOpen:t,toggle:function(){n(!t)}},t&&s.a.createElement(zu.a,{style:{},className:"preview-file-dialog__menu "+(u.type===Ru.File?"file":"image")},u.type===Ru.File&&function(){if(void 0!==u.file)return s.a.createElement(s.a.Fragment,null,o(),s.a.createElement("i",null,function(u){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===u)return"0 Bytes";var D=0>e?0:e,t=Math.floor(Math.log(u)/Math.log(1024));return parseFloat((u/Math.pow(1024,t)).toFixed(D))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}(u.file.size,3)," bytes"))}(),u.type===Ru.Image&&function(){if(void 0!==u.file){var e=new FileReader;return e.onload=function(u){var e,D;(null===(e=u.target)||void 0===e?void 0:e.result)&&"string"===typeof u.target.result&&(null===a||void 0===a||null===(D=a.current)||void 0===D||D.setAttribute("src",u.target.result))},e.readAsDataURL(null===u||void 0===u?void 0:u.file),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"previewFileDialog__image"},s.a.createElement("img",{ref:a}),o()))}}(),s.a.createElement("div",{className:"previewFileDialog__footer"},s.a.createElement("button",{className:"btn-small red col offset-s1",onClick:function(){n(!1)}},"\u041e\u0442\u043c\u0435\u043d\u0430"),s.a.createElement("button",{className:"btn-small green col offset-s1",onClick:function(){n(!1),u.onFileSend()}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))))}var de=D(765),ge=(D(731),D(732),function(u){var e=u.sendingMessage.failed?" send-message-failed":" sending-message-in-proccess";return s.a.createElement("div",{className:"client_message"},s.a.createElement(Mu.a,{className:"message__content "+e},u.sendingMessage.message.text,u.sendingMessage.failed?s.a.createElement("span",{className:"sending-message-resend"},s.a.createElement("button",{onClick:function(){return u.onResendClick(u.sendingMessage.message)}},"\u27f3")):s.a.createElement("span",{className:"sending-message-spinner"},s.a.createElement(de.a,{style:{width:"1rem",height:"1rem"}}))))}),me=D(258);var fe=function(u,e){var D=Object(r.useRef)(u);Object(r.useEffect)((function(){D.current=u}),[u]),Object(r.useEffect)((function(){if(null!==e){var u=setInterval((function(){return D.current()}),e);return function(){return clearInterval(u)}}}),[e])};D(735);var pe=function(u){return s.a.createElement("div",{className:"load-prev-chat-container"},u.gettingPrevChat?s.a.createElement("span",{className:"load-prev-chat-spinner"},s.a.createElement(de.a,{style:{width:"1rem",height:"1rem"}})):s.a.createElement("span",{onClick:u.onGetPrevChatClicked,className:"load-prev-chat-image"},s.a.createElement("img",null)))},ve=Object(i.c)((function(u){return{messages:ne(u),isMessageEditing:ae(u),isGettingPrevChatMessages:re(u),firstUnreadMessage:se(u),hubConnection:u.chat.hubConnection,sendingFilesCount:oe(u),sendingMessage:Ae(u),footerCompanyName:ie(u),footerCompanyUrl:ce(u),customerId:Fe(u),loadPrevChat:Ce(u)}}),(function(u){return{startSignalR:function(e){return u(function(u){return function(){var e=Object(y.a)(w.a.mark((function e(D){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D({type:S,payload:{onSignalRMessageReceived:u}});case 1:case"end":return e.stop()}}),e)})));return function(u){return e.apply(this,arguments)}}()}(e))},addMessageToState:function(e){return u(bu(e))},getPrevChat:function(){return u(function(){var u=Object(y.a)(w.a.mark((function u(e,D){var t,n,a,r;return w.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(e({type:M}),u.prev=1,!((t=Math.min.apply(Math,Object(g.a)(D().chat.messages.map((function(u){return u.chatId})).filter((function(u){return 0!=u})))))>0)){u.next=8;break}return u.next=6,au(t);case 6:(n=u.sent).isSuccess&&(r=null!==(a=n.value)&&void 0!==a?a:[],e({type:x,payload:{messages:r}}));case 8:u.next=13;break;case 10:u.prev=10,u.t0=u.catch(1),console.error(u.t0);case 13:e({type:O});case 14:case"end":return u.stop()}}),u,null,[[1,10]])})));return function(e,D){return u.apply(this,arguments)}}())},sendMessage:function(e){var D=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return u(yu(e,D))},sendPreviewMessage:function(e){return u(function(u){return function(){var e=Object(y.a)(w.a.mark((function e(D,t){var n,a,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("true"!=Q("sendPreviewMessage")){e.next=14;break}if(n=t().chat.messages,!((a=Math.max.apply(Math,Object(g.a)(n.map((function(u){return u.chatId})))))>0)){e.next=14;break}if(!$()){e.next=14;break}if(r={chatId:a,text:u},window.serverProtocol!==su.http){e.next=13;break}return e.next=11,Du(r);case 11:e.next=14;break;case 13:window.signalRHubConnection.invoke("PreviewUserMessage",r);case 14:case"end":return e.stop()}}),e)})));return function(u,D){return e.apply(this,arguments)}}()}(e))},sendFileMessage:function(e,D){return u(function(u,e){return function(){var D=Object(y.a)(w.a.mark((function D(t,n){var a;return w.a.wrap((function(D){for(;;)switch(D.prev=D.next){case 0:if(!(u.size>20971520)){D.next=3;break}return alert("\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0442\u044c 20mb"),D.abrupt("return");case 3:return t({type:R}),D.next=6,tu(u,e);case 6:!0===(a=D.sent).isSuccess?a.value&&bu(a.value)(t,n):alert("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0444\u0430\u0439\u043b\u0430"),t({type:P});case 9:case"end":return D.stop()}}),D)})));return function(u,e){return D.apply(this,arguments)}}()}(e,D))},editMessage:function(e){return u(function(u){return function(){var e=Object(y.a)(w.a.mark((function e(D){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D({type:L}),D({type:U,payload:{message:u}});case 2:case"end":return e.stop()}}),e)})));return function(u){return e.apply(this,arguments)}}()}(e))},initializeMessages:function(){return u(function u(){return function(){var e=Object(y.a)(w.a.mark((function e(D,t){var n,a,r,s,o,i,c,F,C,A,E,l,B,d;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!du()){e.next=7;break}return e.next=3,nu();case 3:(n=e.sent).isSuccess?(A=null!==(a=null===(r=n.value)||void 0===r?void 0:r.messages)&&void 0!==a?a:[],E=null!==(s=null===(o=n.value)||void 0===o?void 0:o.customerId)&&void 0!==s?s:"",l=null!==(i=null===(c=n.value)||void 0===c?void 0:c.loadPrevChat)&&void 0!==i&&i,B=new URLSearchParams(document.location.href),d=null!==(F="true"===(null===(C=B.get("hideClientStartMessage"))||void 0===C?void 0:C.toLowerCase()))&&void 0!==F&&F,D({type:T,payload:{messages:A,customerId:E,loadPrevChat:l}}),D({type:j,payload:{hideClientStartMessage:d}})):console.error("initializeMessages error!"),e.next=8;break;case 7:setTimeout(u,2e3);case 8:case"end":return e.stop()}}),e)})));return function(u,D){return e.apply(this,arguments)}}()}())},trySendStartMessage:function(){return u(function(){var u=Object(y.a)(w.a.mark((function u(e,D){var t,n,a;return w.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:n=null!==(t=vu.get("startMode"))&&void 0!==t?t:"auto",0===D().chat.messages.length&&"auto"===n&&(a={text:"/start",tag:"START_MESSAGE_TAG",startParams:iu()},yu(a)(e,D));case 3:case"end":return u.stop()}}),u)})));return function(e,D){return u.apply(this,arguments)}}())},readMessage:function(e){return u(function(u){return function(){var e=Object(y.a)(w.a.mark((function e(D){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D({type:H,payload:{messageId:u}});case 1:case"end":return e.stop()}}),e)})));return function(u){return e.apply(this,arguments)}}()}(e))},setFooterCopmanyTitle:function(){return u(function(){var u=Object(y.a)(w.a.mark((function u(e){var D,t;return w.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:D=vu.get("linkName"),t=vu.get("linkUrl"),e({type:G,payload:{footerCompanyName:D,footerCompanyUrl:t}});case 3:case"end":return u.stop()}}),u)})));return function(e){return u.apply(this,arguments)}}())},ensureGotAllMessages:function(){return u(function(){var u=Object(y.a)(w.a.mark((function u(e,D){var t,n;return w.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:t=D().chat.messages.map((function(u){return u.messageId})),(n=D().chat.hubConnection).state===Au.c.Connected&&n.invoke("EnsureGotAllMessages",t).then(function(){var u=Object(y.a)(w.a.mark((function u(t){return w.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:wu(t)(e,D);case 1:case"end":return u.stop()}}),u)})));return function(e){return u.apply(this,arguments)}}()).catch((function(u){return console.error(u)}));case 3:case"end":return u.stop()}}),u)})));return function(e,D){return u.apply(this,arguments)}}())}}}))((function(u){var e=Object(r.useState)({file:void 0,type:void 0}),D=Object(m.a)(e,2),t=D[0],a=D[1],o=Object(r.useState)(!1),i=Object(m.a)(o,2),c=i[0],F=i[1],C=Object(r.useState)(!0),A=Object(m.a)(C,2),E=A[0],l=A[1],v=Object(r.useState)(u.hubConnection.state),b=Object(m.a)(v,2),w=b[0],y=b[1],S=Object(r.useState)(),_=Object(m.a)(S,2),x=_[0],M=_[1],O=s.a.useRef(),T=s.a.useRef(null);window.widgetOnScreen=function(u){var e=Object(r.useState)(!1),D=Object(m.a)(e,2),t=D[0],n=D[1];return Object(r.useEffect)((function(){var e=new IntersectionObserver((function(u){for(var e=!1,D=0;D<u.length;++D)u[D].isIntersecting&&(e=!0);n(e)}));return u.current&&e.observe(u.current),function(){e.disconnect()}}),[u]),t}(O),Object(r.useEffect)((function(){var e;return u.setFooterCopmanyTitle(),u.initializeMessages(),e=H,lu.includes(e)||lu.push(e),function(){return function(u){var e=lu.indexOf(u);e>-1&&lu.slice(e,1)}(H)}}),[]),Object(r.useEffect)((function(){var e;u.customerId&&u.messages.length>0&&"chat-closed"!=(null===(e=u.messages.find((function(e){return e.messageId==Math.max.apply(Math,Object(g.a)(u.messages.map((function(u){return u.messageId}))))})))||void 0===e?void 0:e.tag)&&L()}),[u.customerId]),Object(r.useEffect)((function(){window.widgetOnScreen&&w===Au.c.Connected&&u.customerId?u.trySendStartMessage():window.widgetOnScreen&&w===Au.c.Disconnected&&L()}),[window.widgetOnScreen,w]),Object(r.useEffect)((function(){window.widgetOnScreen&&E&&(N(),l(!1))}),[window.widgetOnScreen]),fe((function(){u.ensureGotAllMessages()}),5e3),Object(r.useEffect)((function(){N()}),[u.isMessageEditing]),Object(r.useEffect)((function(){x?(R(x),M(void 0)):N()}),[u.messages.length]);var j=Object(r.useState)(new Audio("./sounds/new-message-sound.mp3")),k=Object(m.a)(j,1)[0],I=function(e){var D="false"!==new URLSearchParams(window.location.href).get("isMessageSound");switch(e.type){case"NewMessage":u.addMessageToState(e.data),e.data.messageType!==p.ClientMessage&&D&&k.play(),N();break;case"EditMessage":u.editMessage(e.data),N()}},N=function(){f.animateScroll.scrollToBottom({delay:100,duration:300,containerId:"chat-body"})},R=function(u){var e=document.getElementById("message_".concat(u));null===e||void 0===e||e.scrollIntoView(!0)},P=function(e){var D,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];u.sendMessage(e,t),me.isMobile&&t||null===(D=T.current)||void 0===D||D._setFocus()},U=function(){M(Math.min.apply(Math,Object(g.a)(u.messages.filter((function(u){return 0!=u.messageId})).map((function(u){return u.messageId}))))),u.getPrevChat()},L=function(){u.startSignalR(I)},H=function(){y(u.hubConnection.state)};return s.a.createElement("section",{className:"chat"},function(){var e,D=u.messages,r=null!==(e=u.sendingMessage&&!u.sendingMessage.failed)&&void 0!==e&&e,o="false"!==new URLSearchParams(window.location.href).get("disableUsedButtons");return s.a.createElement(xu.a,{className:"chat__content"},s.a.createElement("div",{className:"company-logo-container"},s.a.createElement("span",{className:"connection-status "+(w===Au.c.Connected?"online":"offline")}),s.a.createElement("div",{className:"company-logo"}),s.a.createElement("div",{className:"company-title"})),!u.isMessageEditing&&s.a.createElement(Uu.a,{ref:O,id:"chat-body",className:"chat__body"},u.loadPrevChat&&s.a.createElement(pe,{gettingPrevChat:u.isGettingPrevChatMessages,onGetPrevChatClicked:U}),function(e){var D,t,n=new URLSearchParams(window.location.href),a=null!==(D=n.get("startMessageWithoutBot"))&&void 0!==D?D:"\u0417\u0430\u0434\u0430\u0439\u0442\u0435 \u0412\u0430\u0448 \u0432\u043e\u043f\u0440\u043e\u0441",r=null!==(t=n.get("startMode"))&&void 0!==t?t:"auto",o=!!("false"!==n.get("disableUsedButtons"))&&e>0;return"auto"===r?s.a.Component:s.a.createElement(Pu,{setForceButtonDisabled:F,message:{messageType:1,timeSent:new Date,text:a,customerId:u.customerId,buttons:[{text:"\u041d\u0430\u0447\u0430\u0442\u044c"}]},isButtonsDisabled:o,onMenuButtonClick:function(u){o||c?N():P({text:u.text},!0)},customerId:u.customerId})}(D.length),D.map((function(e,t){var a=!!o&&0!==D.slice(t+1,D.length-1).filter((function(u){return u.messageType===p.ClientMessage})).length;return s.a.createElement(le.a,{delayedCall:!0,key:e.messageId,containment:O.current,onChange:function(D){D&&u.readMessage(e.messageId)}},s.a.createElement(Pu,{key:t,message:e,setForceButtonDisabled:F,isButtonsDisabled:a,onMenuButtonClick:function(u){a||c?N():(u.contentType===n.Link&&function(u){if((null===u||void 0===u?void 0:u.length)>0){var e=document.createElement("a");e.href=u,e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}(u.value),P({text:u.text},!0))},customerId:u.customerId}))})),u.sendingMessage&&s.a.createElement(ge,{sendingMessage:u.sendingMessage,onResendClick:P})),s.a.createElement("div",{className:"chat__footer"},s.a.createElement("div",{className:"chat-input-contairner"},s.a.createElement("div",{className:"input-container",id:"input-container"},s.a.createElement("span",{className:"input-container__fetch-file"+(r?" nonclickable":"")},s.a.createElement(ee,{onFileChoosen:function(u,e){a(Object(B.a)(Object(B.a)({},t),{},{file:u,type:e}))},onLocationChoosen:function(u){P({text:"\u0413\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430",location:{latitude:u.coords.latitude,longitude:u.coords.longitude}})}}),s.a.createElement(Be,{file:t.file,type:t.type,onFileSend:function(){return void 0!==t.file&&void 0!==t.type?u.sendFileMessage(t.file,t.type):{}}})),u.sendingFilesCount>0&&s.a.createElement("div",{className:"input-container__file_loader"},"Sending ",u.sendingFilesCount," file(s)... ",s.a.createElement(de.a,{style:{width:"1rem",height:"1rem"}})),s.a.createElement("span",null,s.a.createElement(Qu,{ref:T,onInputPasteHandler:function(u){return function(u){var e,D,n=Object(d.a)(u.clipboardData.files);try{for(n.s();!(e=n.n()).done;){var r=e.value;D=r.type,h.includes(D)?a(Object(B.a)(Object(B.a)({},t),{},{file:r,type:Ru.Image})):a(Object(B.a)(Object(B.a)({},t),{},{file:r,type:Ru.File}))}}catch(s){n.e(s)}finally{n.f()}}(u)},onSendMessage:function(u){return P({text:u})},onSendPreviewMessage:u.sendPreviewMessage,isSendingMessage:r})),s.a.createElement("div",null,s.a.createElement(ue.a,{className:"chat__content-footer--link",href:u.footerCompanyUrl,target:"_blank"},u.footerCompanyName))))))}())})),he=function(u){Object(A.a)(D,u);var e=Object(E.a)(D);function D(){return Object(F.a)(this,D),e.apply(this,arguments)}return Object(C.a)(D,[{key:"render",value:function(){return r.createElement("section",{className:"no-padding"},r.createElement(l.a,{path:"*",component:ve,exact:!0}))}}]),D}(r.Component),be=D(263),we=Object(be.a)(),ye=D(260),Se=D(242),_e=D(64),xe={messages:[],isMessageEditing:!1,isGettingPrevChatMessages:!1,hubConnection:function(u){console.log("Creating SignalR connection..");var e=(new Au.b).withUrl("".concat(u),{skipNegotiation:!0,transport:Au.a.WebSockets}).withAutomaticReconnect({nextRetryDelayInMilliseconds:function(u){return(new Eu.a).set("isReconnecting",!0,{path:"/"}),u.previousRetryCount<5?2e3*u.previousRetryCount+1e3*Math.random():1e4}}).configureLogging(Au.d.Error).build();return e.onclose((function(u){var e=void 0===u?"":"Error: "+u;console.log("Connection closed! "+e),Bu()})),e.onreconnecting(Bu),e.onreconnected(Bu),e.on("Ping",(function(u){return pu(u)})),window.signalRHubConnection=e,e}(V),sendingFilesCount:0,footerCompanyName:"",sendingMessage:null,footerCompanyUrl:"",customerId:"",hideClientStartMessage:!1,loadPrevChat:!1},Me={chat:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,e=arguments.length>1?arguments[1]:void 0,D=e;switch(D.type){case _:var t=D.payload.message;t.isRead=!1;var n=t.needClearMessagesHistory?[t]:u.messages.concat(t);return Object(B.a)(Object(B.a)({},u),{},{messages:n});case x:var a,r=D.payload.messages,s=Object(d.a)(r);try{for(s.s();!(a=s.n()).done;){var o=a.value;o.isRead=!1}}catch(Z){s.e(Z)}finally{s.f()}var i=r.map((function(u){return u.messageId})),c=u.messages.filter((function(u){return!i.includes(u.messageId)})).concat(r);return Object(B.a)(Object(B.a)({},u),{},{messages:c});case M:return Object(B.a)(Object(B.a)({},u),{},{isGettingPrevChatMessages:!0});case O:return Object(B.a)(Object(B.a)({},u),{},{isGettingPrevChatMessages:!1});case T:var F=D.payload,C=F.messages,A=F.customerId,E=F.loadPrevChat;return Object(B.a)(Object(B.a)({},u),{},{messages:C,customerId:A,loadPrevChat:E});case S:var l=u.hubConnection;return l.off("SignalRMessage"),l.on("SignalRMessage",(function(u){D.payload.onSignalRMessageReceived(u)})),mu(l),Object(B.a)(Object(B.a)({},u),{},{hubConnection:l});case L:return Object(B.a)(Object(B.a)({},u),{},{isMessageEditing:!0});case U:var g=D.payload.message,m=u.messages,f=m.find((function(u){return u.messageId==g.messageId}));return f&&(f.text=g.text,f.imageId=g.imageId,f.fileId=g.fileId,f.file=g.file,f.contentType=g.contentType),Object(B.a)(Object(B.a)({},u),{},{messages:m,isMessageEditing:!1});case H:var p,v=u.messages,h=D.payload.messageId,b=Object(d.a)(v);try{for(b.s();!(p=b.n()).done;){var w=p.value;w.messageId===h&&(w.isRead=!0)}}catch(Z){b.e(Z)}finally{b.f()}return Object(B.a)(Object(B.a)({},u),{},{messages:v});case k:var y=D.payload.message;return Object(B.a)(Object(B.a)({},u),{},{sendingMessage:y});case I:return Object(B.a)(Object(B.a)({},u),{},{sendingMessage:null});case N:var z=u.sendingMessage?Object(B.a)(Object(B.a)({},u.sendingMessage),{},{failed:!0}):u.sendingMessage;return Object(B.a)(Object(B.a)({},u),{},{sendingMessage:z});case R:return Object(B.a)(Object(B.a)({},u),{},{sendingFilesCount:u.sendingFilesCount+1});case P:return Object(B.a)(Object(B.a)({},u),{},{sendingFilesCount:u.sendingFilesCount-1});case j:var V=D.payload.hideClientStartMessage;return Object(B.a)(Object(B.a)({},u),{},{hideClientStartMessage:V});case G:var W=D.payload,q=W.footerCompanyName,J=W.footerCompanyUrl;return Object(B.a)(Object(B.a)({},u),{},{footerCompanyName:q,footerCompanyUrl:J});default:return u}}};var Oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Te(u){navigator.serviceWorker.register(u).then((function(u){u.onupdatefound=function(){var e=u.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(u){console.error("Error during service worker registration:",u)}))}var je=function(u,e){var D=[ye.a,Object(Se.a)(u)],t=Object(_e.c)(Object(B.a)(Object(B.a)({},Me),{},{router:Object(c.b)(u)})),n=[],a="undefined"===typeof window?null:window;return a&&a.__REDUX_DEVTOOLS_EXTENSION__&&n.push(a.__REDUX_DEVTOOLS_EXTENSION__()),Object(_e.e)(t,e,_e.d.apply(void 0,[_e.a.apply(void 0,D)].concat(n)))}(we);window.onload=function(){var u=document.getElementById("loading-cover");u&&(u.style.display="none");var e=document.getElementById("root");e&&(e.style.display="block")},o.render(r.createElement(i.a,{store:je},r.createElement(c.a,{history:we},r.createElement(he,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(function(){var u="".concat(".","/service-worker.js");Oe?function(u){fetch(u).then((function(e){var D=e.headers.get("content-type");404===e.status||D&&-1===D.indexOf("javascript")?navigator.serviceWorker.ready.then((function(u){u.unregister().then((function(){window.location.reload()}))})):Te(u)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(u):Te(u)}))}}();var ke=new URLSearchParams(window.location.search).get("css");if(0===(null===ke||void 0===ke?void 0:ke.length)||null===ke)console.log("Standarted styles");else{var Ie=document.createElement("link");Ie.setAttribute("rel","stylesheet"),Ie.setAttribute("href",ke),document.head.appendChild(Ie)}}},[[268,1,2]]]);
//# sourceMappingURL=main.674c41ca.chunk.js.map